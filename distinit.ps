%!
% Distinit.ps
%
%%%%%%%%%% DO NOT EDIT THIS FILE %%%%%%%%%%%%%%
%
% (c) Copyright 1990-2002 Adobe Systems Incorporated.
% All rights reserved.
% Patents Pending
%
% NOTICE:  All information contained herein is the property of
% Adobe Systems Incorporated.  Many of the intellectual and
% technical concepts contained herein are proprietary to Adobe,
% are protected as trade secrets, and are made available only to
% Adobe licensees for their internal use.  Any reproduction or
% dissemination of this software is strictly forbidden unless
% prior written permission is obtained from Adobe.
%
% PostScript and Display PostScript are trademarks of Adobe Systems
% Incorporated which may be registered in certain jurisdictions.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% This gets run as an exitserver job just after the PostScript
% server gets initialized.
%

% (Processing Distinit.ps...\n) print flush

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Log the postscript version to the status dialog
%
version = flush

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Make RunFile accessible in userdict
%
userdict /RunFile { /DistillOps /ProcSet findresource /RunFile get exec } bind put

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Set up CJK font environment
%
{
    % only try this if psdisk directory tree is installed
    (data/psdisk/Sys/Start) status
    {
        pop pop pop pop % status results
        % Set this, else the CSL cannot find resources (other than fonts)
        << /GenericResourceDir (data/psdisk/Resource/) >> setsystemparams

        (data/psdisk/Sys/Start) run

        % Pre-load some Procsets
        /CompatibleFonts /ProcSet findresource pop

        (CID support library initialization completed.\n) print flush
    } if

    % Modify the ResourceFileName proc in the following resource categories
    % to use distiller's RedefineResourceFileName 
    currentglobal true setglobal
    [/CIDFont /CMap]
      {/DistillOps /ProcSet findresource /RedefineResourceFileName get exec}
    forall
    setglobal

} stopped
{
    (\nERROR: CID support library initialization failed. CID fonts disabled.\n\n) print flush
} if

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  run any of the user's startup jobs
%
globaldict begin /allow_startjob false def end
(dStartup.ps) RunFile
1183615869 internaldict /DistillerStartupFiles get
{ RunFile } 512 string filenameforall
globaldict begin /allow_startjob true def end

% (Processing Distinit.ps done\n) print flush

%  End of file.

